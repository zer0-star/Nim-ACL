<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <!-- Uikit -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://judge.yosupo.jp/public/css/uikit.min.css" />
    <script src="https://judge.yosupo.jp/public/js/uikit.min.js"></script>
    <script src="https://judge.yosupo.jp/public/js/uikit-icons.min.js"></script>
    <!-- Katex -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.css"
        integrity="sha384-yFRtMMDnQtDRO8rLpMIKrtPCD5jdktao2TV19YiZYWMDkUR5GQZR/NOVTdquEx1j" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.js"
        integrity="sha384-9Nhn55MVVN0/4OFx7EE5kpFBPsEMZxKTCnA+4fqDmg12eCTqGi6+BB2LjY8brQxJ"
        crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/contrib/auto-render.min.js"
        integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"
        onload="renderMathInElement(document.body);"></script>
    <!-- Ace editor-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ace.js"></script>

    <style>
        h2 {
            border-bottom:1px solid #CCC;
        }
    </style>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            renderMathInElement(
                document.body, {
                delimiters: [
                    { left: "$$", right: "$$", display: true },
                    { left: "$", right: "$", display: false }],
                ignoredTags: [],
            })
            for (e of document.getElementsByClassName("sample-code")) {
                var editor = ace.edit(e);
                editor.setOption("maxLines", "Infinity");
                editor.setReadOnly(true);
                editor.getSession().setMode("ace/mode/nim");                
            }
        });
    </script>
</head>
<body>
    <div class="uk-navbar-container" uk-navbar>
        <div class="uk-navbar-left">
            <a href="./index.html" class="uk-navbar-item uk-logo">AC Library</a>
        </div>
    </div>
    <section class="uk-section">
        <div class="uk-container">
            <h1>グラフのテンプレート</h1>
<h2>コンストラクタ</h2>
<p>グラフを作成します。ノードの型を$U$, 重みの型を$T$としています。</p>
<pre><code class="nim">var g = initGraph(n:int, T:typedesc)
</code></pre>

<p>頂点数$n$, 重みの型が$T$のグラフを作成。第2引数の$T$は省略可能で省略した場合はintとなります。この呼び方においてはノードの型Uはintが自動で指定されます。</p>
<pre><code class="nim">var g = initGraph(n:int, id:proc(u:U):int, T:typedesc)
</code></pre>

<p>頂点数$n$, ノードの型が$U$, 重み型が$T$のグラフを作成します。
第2引数のidは$U$からint($n$未満の非負整数)を返す関数で異なるノード$U$ごとに違う値を返さなければなりません。
id関数は最短路問題等でノードに紐付けられたデータを一次元の配列として扱うためのもので必須です。
$U$の型はid関数によって特定されます。第3引数の$T$は省略可能で省略した場合はintとなります。</p>
<pre><code class="nim">var g = initGraph(n:int, id:proc(u:U):int, adj:proc(u:U):seq[tuple[dst:U, weight:T]])
var g = initGraph(n:int, id:proc(u:U):int, adj:iterator(u:U):tuple[dst:U, weight:T])
</code></pre>

<p>隣接点をprocやiterator(adj)で指定できます。この場合、各アルゴリズムで隣接点探索をする際にadjが呼び出されます。
iteratorはclosureでなくてはなりません。
この呼び方でグラフを作った場合、辺はadj procやadj iteratorで決められるので、下記のaddEdge関数は使えません。</p>
<p><strong>制約</strong></p>
<ul>
<li>$0 \leq n \leq 10^8$</li>
</ul>
<h2>辺の追加</h2>
<pre><code class="nim">g.addEdge(u:U, v:U, w:T)
</code></pre>

<p>頂点$u$から頂点$v$へ重み$w$の有向辺を追加する。
$w$は省略可能。省略した場合はT(1)と解釈される。</p>
<p><strong>制約</strong></p>
<ul>
<li>$0 \leq u, v &lt; n$</li>
</ul>
<pre><code class="nim">g.addBiEdge(u:U, v:U, w:T)
</code></pre>

<p>頂点$u$と頂点$v$を結ぶ重み$w$の無向辺を追加
$w$は省略可能。省略した場合は1と解釈される。</p>
<p><strong>制約</strong></p>
<ul>
<li>$0 \leq u, v &lt; n$</li>
</ul>
<h2>配列指定によるグラフ作成</h2>
<pre><code class="nim">initDirectedGraph[T](n:int, a:seq[int], b:seq[int], w:seq[T])
</code></pre>

<p>aの長さを$m$としたとき、各$i = 0, 1, \ldots, m - 1$について、a[i]からb[i]へ重み$w[i]$の辺を持つ有向グラフを作成。a, b, wは0-basedでなくてはならないことに注意。</p>
<pre><code class="nim">initUnDirectedGraph[T](n:int, a:seq[int], b:seq[int], w:seq[T])
</code></pre>

<p>aの長さを$m$としたとき、各$i = 0, 1, \ldots, m - 1$について、a[i]とb[i]を結ぶ重み$w[i]$の辺を持つ無向グラフを作成。a, b, wは0-basedでなくてはならないことに注意。</p>
<p><strong>計算量</strong></p>
<ul>
<li>$O(n + m)$</li>
</ul>
        </div>
    </section>
</body>

</html>
